from Tkinter import *
import tkMessageBox
import os
import sys
from tkFileDialog import *
master = Tk()
Root = master
RTitle=Root.title("Anti-Malware")
curPath = os.getcwd()
w = Label(master, text="Welcome to the Anti-Malware!")
w.pack()
t = Label(master, text="What would you like to do?")
t.pack()
Label(Root, text = "IP of remote server:").pack(side = TOP)
e = Entry(master, bd = 5)
e.pack(side = TOP)

def hello():
    print "hello"

def timeTriger():
    s = os.path.join(curPath,"client.py")
    #t = os.path.join(curPath,"Malwares","TimeTriger.exe")
    path = find()
    if len(path) == 0:
        return
    command = s+" "+"-f"+" "+path+" -t 1 -p "+e.get()
    os.system(command)
    printResult()

def mouseTriger():
    s = os.path.join(curPath,"client.py")
    #t = os.path.join(curPath,"Malwares","mouseTriger.exe")
    path = find()
    if len(path) == 0:
        return
    command = s+" "+"-f"+" "+path+" -t 3 -p "+e.get()
    os.system(command)
    printResult()

def keyboardTriger():
    s = os.path.join(curPath,"client.py")
    #t = os.path.join(curPath,"Malwares","KeyboardTriger.exe")
    path = find()
    if len(path) == 0:
        return
    command = s+" "+"-f"+" "+path+" -t 2 -p "+e.get()
    os.system(command)
    printResult()

def find():
    """

    :rtype : Path to file
    """
    path = askopenfilename(parent=Root)
    #Label(Root, text = fileName).pack(side = TOP)
    return path.replace("/","\\")

def printResult():
    with open(os.path.join(curPath,"Resultsclient","results.txt")) as f:
        lineArr = f.readlines()
        s = ""
        for line in lineArr:
            s = s + line
        tkMessageBox.showinfo("Results",s)

B = Button(master, text ="Check\nTimeTriger", command = timeTriger)
B.pack(side = LEFT, expand = True)
B = Button(master, text ="Check\nMouseTriger", command = mouseTriger)
B.pack(side = LEFT,expand = True)
B = Button(master, text ="Check\nKeyboardTriger", command = keyboardTriger)
B.pack(side = LEFT,expand = True)

#RWidth=master.winfo_screenwidth()
#RHeight=master.winfo_screenheight()
#master.geometry("%dx%d+0+0" % (RWidth, RHeight))
#Root.minsize(300,300)
#Root.geometry("500x500")
mainloop()

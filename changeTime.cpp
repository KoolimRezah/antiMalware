#include <stdlib.h>
#include <stdio.h>
#include <windows.h>
#include <time.h>

void changeTime(char* hour, char* minute);

void changeTime(char* hour, char* minute) {
	SYSTEMTIME * future = (SYSTEMTIME *)malloc(sizeof(SYSTEMTIME));  
	
	GetLocalTime(future);
	
	future->wMinute = atoi(minute);
	future->wHour = atoi(hour);
	
	int result = SetLocalTime(future);
	if(result == 0) {
		printf("Failed to change system time");
	}
}

int main(int argc, char* argv[]) {
	
  	//SYSTEMTIME * future = (SYSTEMTIME *)malloc(sizeof(SYSTEMTIME));       /* as in future date */
  	/*
   	future->wSecond = 59;
   	future->wMinute = 48;
   	future->wHour = 14;
   
   	future->wDay =20;     
   	future->wMonth = 7;     
   	future->wYear = 2014; 
   	*/
   	if(argc == 1) {
   		SYSTEMTIME * future = (SYSTEMTIME *)malloc(sizeof(SYSTEMTIME));
   		GetLocalTime(future);
   		printf("The system time is: %02d:%02d\n", future->wHour, future->wMinute);
   	}
   	
   	
   	if(argc == 3) {
   		changeTime(argv[1],argv[2]);
   	}
   	
   	/*
	   
	GetLocalTime(future);
    
    printf("The system time is: %02d:%02d\n", future->wHour, future->wMinute);
    
    future->wHour = future->wHour - 1;
    
    printf("Chaged to: %02d:%02d\n", future->wHour, future->wMinute);
    
    int result = SetLocalTime(future); 
    
    if(result == 0) {
    	printf("Failed to set local time\n");
    }
	
	GetLocalTime(future);
    
    printf("The system time now is: %02d:%02d\n", future->wHour, future->wMinute);
    */
    
	//free(future);
	//system("pause");
	return 0;
}
